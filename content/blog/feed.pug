---
layout: null
eleventyExcludeFromCollections: true
dynamicPermalink: false # Don't parse `permalink` using Pug
permalink: /blog/feed.xml
metadata:
  title: Blog – Matias Kinnunen
  subtitle: A collection of my wildest adventures involving computers, cats and dragons. 🐱‍🐉
  author:
    name: Matias Kinnunen
    email: blog@mtsknn.fi
---
//- Blog posts don't have publication times, so let's just hard-code some value
- const get_updated_date = (date) => `${datetime.robot(date)}T12:00:00+03:00`

- const latest_post = collections.blog_posts[collections.blog_posts.length - 1]

doctype xml
feed(xmlns="http://www.w3.org/2005/Atom")
  title= metadata.title
  subtitle= metadata.subtitle
  link(href=`${site.url}${permalink}` rel="self")
  link(href=`${site.url}/`)
  updated= get_updated_date(latest_post.date)
  id= metadata.siteUrl
  author
    name= metadata.author.name
    email= metadata.author.email
  each post in collections.blog_posts
    - const full_url = `${site.url}${post.url}`
    entry
      title= post.data.title
      link(href=full_url)
      updated= get_updated_date(post.date)
      id= full_url
      content(type="html")
        = md.render(post.data.intro)
        = post.templateContent.replace(/<a class="link link-permalink".+<\/a>/g, '')
