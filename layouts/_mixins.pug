mixin breadcrumb
  mixin chevron
    svg.inline.mx-2.text-gray-500(
      aria-hidden="true"
      fill="currentColor"
      style={ width: '1.25rem' }
      viewBox="0 0 20 20"
    )
      path(
        clip-rule="evenodd"
        d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
        fill-rule="evenodd"
      )

  mixin homeIcon
    svg.align-text-bottom.inline(
      aria-hidden="true"
      fill="none"
      stroke="currentColor"
      style={ width: '1.25rem' }
      viewBox="0 0 24 24"
    )
      title Home
      path(
        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
      )

  nav.mb-4(aria-label="Breadcrumb")
    ul
      li.inline.list-none
        //`home` and `chevron-right` icons by Heroicons (https://heroicons.com/), MIT Licensed
        a.duration-150.text-gray-500.transition-color(
          aria-label="Home"
          class="hover:text-red-600 active:text-red-800"
          href="/"
        ): +homeIcon
        +chevron
      each item in utils.getBreadcrumbItems(page.url)
        li.inline.list-none
          a.link(href=item.href)= item.text
          +chevron

mixin postMeta(date, tags = [])
  - const isScheduled = date > Date.now()

  .text-gray-600
    span.sr-only Published on#{' '}
    time.border-gray-300.border-r-2.pr-4.tracking-wider.uppercase(
      datetime=datetime.robot(date)
    )
      if isScheduled
        span.pr-2(aria-hidden="true" title="Scheduled") ⌚
      = datetime.human(date)

    if tags.length
      span.sr-only &ndash; Tags:
      ul.inline
        each tag in tags
          li.inline-block.list-none.ml-4.whitespace-no-wrap(class="!my-1 !pl-0")
            a.link.link-tag.py-1(href=`/blog/tags/${slugify(tag)}/`)= tag

mixin recipeMeta(date, tags, isDraft)
  - const isScheduled = date > Date.now()

  .text-gray-600(class="sm:whitespace-no-wrap")
    //- Disabled for now because all recipes have only one tag
    //- if tags.length
    //-   span.sr-only Tags:
    //-   ul.inline.mr-4.space-x-2
    //-     each tag in tags
    //-       li.bg-gray-200.font-bold.inline-block.list-none.rounded-lg.text-gray-800(
    //-         class="!my-1 !px-2"
    //-       )= tag

    if isDraft
      span.pr-2(aria-hidden="true" title="Draft") ✏
    time.tracking-wider.uppercase(datetime=datetime.robot(date))
      if isScheduled
        span.pr-2(aria-hidden="true" title="Scheduled") ⌚
      span.sr-only Published on#{' '}
      = datetime.human(date)

mixin skipLink(text, href, classes = '')
  .absolute.z-10
    a.bg-orange-300.font-bold.inline-block.rounded.sr-only.underline(
      class=`!text-black focus:px-6 focus:py-4 focus:not-sr-only ${classes}`
      href=href
    )= text

mixin toc(html)
  mixin list(items)
    ol
      each item in items
        li
          a.link(href=item.href)!= item.content
          if item.subItems.length > 0
            +list(item.subItems)

  - const items = getTocItems(html)
  if items.length >= 2
    h2.tracking-widest.uppercase(class="!text-base !text-gray-700 xl:!text-lg")
      | Table of contents
    +skipLink('Skip table of contents', '#skip-toc')
    nav(aria-label="Table of contents")
      +list(items)
    hr(aria-hidden="true" class="!mb-0")
    #skip-toc
