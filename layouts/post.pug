extends ./layout

block content
  article
    h1(class="!mb-6")= title
    .mb-6
      +postMeta(page.date, tags)
    .lead!= md.render(intro)
    hr(aria-hidden="true" class="!mb-0")

    //- Anchor for home page's "Continue reading" links
    #continue-reading.mb-12

    if content.startsWith('<nav class="table-of-contents">')
      h2.tracking-widest.uppercase(class="!text-base !text-gray-700 xl:!text-lg")
        | Table of contents
      +skipLink('Skip table of contents', '#skip-toc')

      -
        // Ugly hack :-)
        const modifiedContent = content
          .replace('<nav', '<nav aria-label="Table of contents"')
          .replace(
            '</nav>',
            `
              </nav>
              <hr aria-hidden="true" class="!mb-0">
              <div id="skip-toc"></div>
            `
          )
      != modifiedContent
    else
      != content
